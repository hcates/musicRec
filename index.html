<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>tunes4you</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
<div>
    Enter up to three artists:
</div>
<br>
<form id="recForm">
    Artist 1:<br>
    <input type="text" name="artistOne"><br>
    Artist 2:<br>
    <input type="text" name="artistTwo"><br>
    Artist 3: <br>
    <input type="text" name="artistThree"><br>
    <br>
    <input type="button" onclick="onSubmit()" value="Submit">
</form>
<br>
<script>
    function onSubmit() {

        let token = "Bearer ";
        $.ajax({
            url: "/token",
            method: "GET",
            async: "false",
            success: function(data) {
                token = token + data;
            }
        });

        let a1 = document.getElementsByName("artistOne")[0].value;
        let a2 = document.getElementsByName("artistTwo")[0].value;
        let a3 = document.getElementsByName("artistThree")[0].value;
        let seedString = "";

        $.ajax({
            url: "https://api.spotify.com/v1/search?q=" + a1 + "%20&type=artist",
            method: "GET",
            headers: {
                "Authorization": token
            },
            async: "false",
            success: function (data) {
                a1 = data.artists.items[0].id;
                seedString = a1;
                alert("one: " + seedString);
            }
        });

        $.ajax({
            url: "https://api.spotify.com/v1/search?q=" + a2 + "%20&type=artist",
            method: "GET",
            headers: {
                "Authorization": token
            },
            async: "false",
            success: function (data) {
                a2 = data.artists.items[0].id;
                seedString = seedString + "," + a2;
                alert("two: " + seedString);
            }
        });

        $.ajax({
            url: "https://api.spotify.com/v1/search?q=" + a3 + "%20&type=artist",
            method: "GET",
            headers: {
                "Authorization": token
            },
            async: "false",
            success: function (data) {
                a3 = data.artists.items[0].id;
                seedString = seedString + "," + a3;
                alert("three: " + seedString);
            }
        });

        // $.ajax({
        //     url: "https://api.spotify.com/v1/recommendations?seed_artists=" + seedString,
        //     method: "GET",
        //     headers: {
        //         "Authorization": token
        //     },
        //     async: "false",
        //     success: function (data) {
        //         let list = document.getElementById("results");
        //         for (i = 0; i < 20; i++) {
        //             var entry = document.createElement('li');
        //             entry.innerHTML(data[0][i].name);
        //             list.appendChild(entry);
        //         }
        //     }
        // });

    }
</script>
<ol id="results">
</ol>
</body>
</html>